/**
 * Vulnerability Detail Page
 */

import { useParams } from "react-router-dom";
import { Box, Container, Typography, Button } from "@mui/material";
import { ArrowBack } from "@mui/icons-material";
import { useNavigate } from "react-router-dom";
import { useVulnerabilities } from "../context/VulnerabilityContext";

export default function VulnerabilityDetail() {
  const { id } = useParams<{ id: string }>();
  const navigate = useNavigate();
  const { allVulnerabilities } = useVulnerabilities();

  const vulnerability = allVulnerabilities.find(
    (v) => v.id === decodeURIComponent(id || "")
  );

  if (!vulnerability) {
    return (
      <Container maxWidth="xl" sx={{ py: 4 }}>
        <Button
          startIcon={<ArrowBack />}
          onClick={() => navigate(-1)}
          sx={{ mb: 2 }}
        >
          Back
        </Button>
        <Typography variant="h5">Vulnerability not found</Typography>
      </Container>
    );
  }

  return (
    <Container maxWidth="xl" sx={{ py: 4 }}>
      <Button
        startIcon={<ArrowBack />}
        onClick={() => navigate(-1)}
        sx={{ mb: 2 }}
      >
        Back
      </Button>
      <Typography variant="h4" gutterBottom>
        {vulnerability.cve}
      </Typography>
      <Box sx={{ mt: 4 }}>
        <Typography variant="body1">{vulnerability.description}</Typography>
      </Box>
    </Container>
  );
}
